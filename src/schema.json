{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "",
    "version": 1.0,
    "definitions": {
        "PHASE_B": {
            "enum": ["B", "E"]
        },
        "PHASE_M": {
            "enum": ["M"]
        },
        "FIELD_NAME": {
            "type": "string",
            "description": "The name of the event, as displayed in Trace Viewer."
        },
        "FIELD_CATEGORY": {
            "type": "string",
            "description": "The event categories. This is a comma separated list of categories for the event. The categories can be used to hide events in the Trace Viewer UI."
        },
        "FIELD_PHASE": {
            "type": "string",
            "description": "The event type. This is a single character which changes depending on the type of event being output.",
            "enum": [
                    { "$ref": "#/definitions/PHASE_B"},
                    "B", "C", "D", "E", "F", "f",
                    "I", "i", "N", "O", "P",
                    "p", "S", "s", "T", "t", "X"
                ]
        },
        "FIELD_TIMESTAMP": {
            "type": "integer",
        },
        "BASE_EVENT": {
            "type": "object",
            "properties": {
                "cat": { "type": "string" },
                "dur": { "type": "integer" },
                "name": {  "type": "string" },
                "pid": { "type": "integer" },
                "tdur": { "type": "integer" },
                "tid": { "type": "integer" },
                "ts": { "type": "integer" },
                "tts": { "type": "integer"}
            }
        },
        "META_EVENT": {
            "allOf": [
                { "$ref": "#/definitions/BASE_EVENT" },
                { "properties": {
                        "ph": {
                            "$ref": "#/definitions/PHASE_M"
                        },
                        "name": {
                            "enum": [
                                "num_cpus",
                                "process_labels",
                                "process_name",
                                "process_sort_index",
                                "thread_name",
                                "thread_sort_index",
                                "overhead"
                            ]
                        }
                    }
                }
            ]
        },
        "OTHER_EVENT": {
            "allOf": [
                { "$ref": "#/definitions/BASE_EVENT" },
                { "properties": {
                        "ph": {
                            "$ref": "#/definitions/FIELD_PHASE",
                            "not": {
                                "enum": ["M"]
                            }
                        },
                        "name": { "type": "string" }
                    }
                }
            ]
        }
    },

    "type": "object",
    "required": [
        "traceEvents"
    ],
    "properties": {
        "traceEvents": {
            "type": "array",
            "items": {
                "oneOf": [
                    { "$ref": "#/definitions/OTHER_EVENT" },
                    { "$ref": "#/definitions/META_EVENT" }
                ]
            }
        }
    }
}
