{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "",
    "version": 1.0,
    "definitions": {
        "fields": {
            "name": {
                "type": "string",
                "description": "The name of the event, as displayed in Trace Viewer."
            },
            "category": {
                "type": "string",
                "description": "The event categories. This is a comma separated list of categories for the event. The categories can be used to hide events in the Trace Viewer UI."
            },
            "process-id": {
                "type": "integer"
            },
            "durartion": {
                "type": "integer"
            },
            "timestamp": {
                "type": "integer"
            },
            "thread-id": {
                "type": "integer"
            },
            "thread-duration": {
                "type": "integer"
            },
            "thread-timestamp": {
                "type": "integer"
            }
        },
        "phases-of": {
            "duration-events": {
                "type": "string",
                "enum": [ "B", "E" ]
            },
            "complete-events": {
                "type": "string",
                "enum": [ "X" ]
            },
            "instant-events": {
                "type": "string",
                "enum": [ "I" ]
            },
            "counter-events": {
                "type": "string",
                "enum": [ "C" ]
            },
            "async-events": {
                "type": "string",
                "enum": [ "b", "n", "e" ]
            },
            "flow-events": {
                "type": "string",
                "enum": [ "s", "f", "t" ]
            },
            "sample-events": {
                "type": "string",
                "enum": [ "P" ]
            },
            "object-events": {
                "type": "string",
                "enum": [ "N", "O", "D" ]
            },
            "metadata-events": {
                "type": "string",
                "enum": [ "M" ]
            }
        },
        "events": {
            "base-event": {
                "type": "object",
                "properties": {
                    "cat": { "$ref": "#/definitions/fields/category" },
                    "name": {  "$ref": "#/definitions/fields/name" },
                    "pid": { "$ref": "#/definitions/fields/process-id" },
                    "dur": { "$ref": "#/definitions/fields/duration" },
                    "ts": { "$ref": "#/definitions/fields/timestamp" },
                    "tid": { "$ref": "#/definitions/fields/thread-id" },
                    "tdur": { "$ref": "#/definitions/fields/thread-duration" },
                    "tts": { "$ref": "#/definitions/fields/thread-timestamp" },
                    "ph": {
                        "anyOf": [
                            { "$ref": "#/definitions/phases-of/duration-events" },
                            { "$ref": "#/definitions/phases-of/complete-events" },
                            { "$ref": "#/definitions/phases-of/instant-events" },
                            { "$ref": "#/definitions/phases-of/counter-events" },
                            { "$ref": "#/definitions/phases-of/async-events" },
                            { "$ref": "#/definitions/phases-of/flow-events" },
                            { "$ref": "#/definitions/phases-of/sample-events" },
                            { "$ref": "#/definitions/phases-of/object-events" },
                            { "$ref": "#/definitions/phases-of/metadata-events" }
                        ]
                    }
                }
            },
            "duration-event": {
                "required": [ "pid", "tid", "ph", "ts" ],
                "allOf": [
                    {
                        "$ref": "#/definitions/events/base-event"
                    },
                    {
                        "properties": {
                            "ph": {
                                "$ref": "#/definitions/phases-of/duration-events"
                            }
                        }
                    }
                ]
            },
            "metadata-event": {
                "allOf": [
                    {
                        "$ref": "#/definitions/events/base-event"
                    },
                    {
                        "properties": {
                            "name": {
                                "enum": [
                                    "num_cpus",
                                    "process_labels",
                                    "process_name",
                                    "process_sort_index",
                                    "thread_name",
                                    "thread_sort_index",
                                    "overhead"
                                ]
                            },
                            "ph": {
                                "$ref": "#/definitions/phases-of/metadata-events"
                            }
                        }
                    }
                ]
            },
            "other-event": {
                "allOf": [
                    {
                        "$ref": "#/definitions/events/base-event"
                    },
                    {
                        "properties": {
                            "ph": {
                                "allOf": [
                                    { "$ref": "#/definitions/phases-of/async-events" }
                                ]
                            }
                        }
                    }
                ]
            }
        }
    },

    "type": "object",
    "required": [
        "traceEvents"
    ],
    "properties": {
        "traceEvents": {
            "type": "array",
            "items": {
                "oneOf": [
                    { "$ref": "#/definitions/events/duration-event" },
                    { "$ref": "#/definitions/events/other-event" },
                    { "$ref": "#/definitions/events/metadata-event" }
                ]
            }
        }
    }
}
